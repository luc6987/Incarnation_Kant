# Incarnation_Kant


### ğŸ›ï¸ Digital Kant Baseline v2.0 (æœ€ç»ˆå®šç¨¿)

#### 1. æ ¸å¿ƒå®šä¹‰ (Core Definition)

è¿™æ˜¯ä¸€ä¸ª**è·¨è¯­è¨€ã€è·¨æ—¶ç©º**çš„åº·å¾·æ•°å­—äººæ ¼ã€‚

* **è¾“å…¥:** å…¨çƒä»»ä½•ç°ä»£è¯­è¨€ï¼ˆä¸­/è‹±/æ³•/æ—¥ç­‰ï¼‰ã€‚
* **å†…æ ¸:** åŸºäº Korpora çš„ 18 ä¸–çºªå¾·è¯­åŸæ–‡ RAGã€‚
* **è¾“å‡º:** **"åº·å¾·çš„ç°ä»£é‡è¿°" (Kantian Re-articulation)** â€”â€” ä¸æ˜¯è§£é‡Šâ€œåº·å¾·è¯´äº†ä»€ä¹ˆâ€ï¼Œè€Œæ˜¯åº·å¾·æœ¬äºº**ç›´æ¥ç”¨ä½ çš„è¯­è¨€**æŠŠä»–çš„æ ¸å¿ƒè§‚ç‚¹å†è®²ä¸€éã€‚

---

#### 2. è¯¦ç»†å®ç°æ¨¡å— (Implementation Details)

##### ğŸ› ï¸ æ¨¡å—ä¸€ï¼šæ•°æ®åº“æ„é€  (Database Construction)

*ç­–ç•¥ï¼šä¿æŒ Korpora åŸå§‹æ–‡æœ¬çš„çº¯æ´æ€§ (Raw & Pure)ã€‚*

* **æ•°æ®æº:** `korpora.org` (åº·å¾·å…¨é›† Akademie-Ausgabe)ã€‚
* **æ„é€ æ­¥éª¤ (Python è„šæœ¬):**
1. **æŠ“å– (Scrape):** éå† Korpora ç½‘é¡µï¼Œä¸‹è½½ã€Šçº¯ç²¹ç†æ€§æ‰¹åˆ¤ã€‹ã€ã€Šå®è·µç†æ€§æ‰¹åˆ¤ã€‹ã€ã€Šåˆ¤æ–­åŠ›æ‰¹åˆ¤ã€‹ç­‰æ ¸å¿ƒæ–‡æœ¬ã€‚
2. **æ¸…æ´— (Clean):** å»é™¤ HTML æ ‡ç­¾ï¼Œ**ä¿ç•™å¼•ç”¨å…ƒæ•°æ®** (å¦‚ `[AA III, 45]`)ã€‚
3. **åˆ‡ç‰‡ (Chunking):**
* ä¸è¦æŒ‰å›ºå®šå­—ç¬¦æ•°åˆ‡ï¼ˆå®¹æ˜“åˆ‡æ–­é€»è¾‘ï¼‰ã€‚
* **æŒ‰æ®µè½ (Paragraph) åˆ‡åˆ†**ã€‚åº·å¾·çš„ä¸€ä¸ªè‡ªç„¶æ®µé€šå¸¸å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„è®ºè¯å•å…ƒã€‚


4. **å­˜å‚¨ (Indexing):** ç›´æ¥å°†æ¸…æ´—åçš„ **18 ä¸–çºªå¾·è¯­åŸæ–‡** å­˜å…¥ **ChromaDB**ã€‚ä¸åšç¿»è¯‘ï¼Œä¸åšç°ä»£åŒ–å¤„ç†ã€‚



##### ğŸŒ æ¨¡å—äºŒï¼šå…¨è¯­è¨€è¾“å…¥ä¸ HyDE æ¡¥æ¥ (Universal Input & HyDE)

*ç­–ç•¥ï¼šç”¨â€œå‡æƒ³â€è·¨è¶Šè¯­è¨€å’Œæ—¶é—´ã€‚*

* **ç”¨æˆ·åœºæ™¯:** ç”¨æˆ·å¯ä»¥ç”¨æ³•è¯­ã€æ—¥è¯­æˆ–ä¸­æ–‡æé—®ã€‚
* **HyDE é€»è¾‘æ›´æ–°:**
* LLM æ¥æ”¶ç”¨æˆ·çš„ `[ä»»æ„è¯­è¨€é—®é¢˜]`ã€‚
* **Prompt æŒ‡ä»¤:** "ä¸è¦å›ç­”é—®é¢˜ã€‚è¯·å°†è¿™ä¸ªé—®é¢˜çš„æ ¸å¿ƒæ„å›¾ï¼Œè½¬åŒ–ä¸ºä¸€æ®µ **18 ä¸–çºªå¾·è¯­é£æ ¼çš„åº·å¾·å¼ç‹¬ç™½**ã€‚"
* *ä¾‹å­:* ç”¨æˆ·é—® (ä¸­æ–‡) "ä¸ºäº†å–„æ„çš„ç›®çš„æ’’è°è¡Œä¸è¡Œï¼Ÿ" -> LLM ç”Ÿæˆ (å¾·æ–‡) *"Ãœber ein vermeintes Recht aus Menschenliebe zu lÃ¼gen... Wahrhaftigkeit... Pflicht..."*
* **æ£€ç´¢:** ç”¨è¿™æ®µç”Ÿæˆçš„å¾·è¯­å» ChromaDB æœåŸæ–‡ã€‚



##### ğŸ—£ï¸ æ¨¡å—ä¸‰ï¼šè¾“å‡ºé£æ ¼â€”â€”â€œç°ä»£é‡è¿°â€ (The Modern Re-articulation)

*ç­–ç•¥ï¼šå»â€œè§£è¯´å‘³â€ï¼Œåšâ€œæœ¬äººâ€ã€‚*

* **æ—§æ–¹æ¡ˆ:** "åº·å¾·åœ¨è¿™é‡Œçš„æ„æ€æ˜¯..." (ç¬¬ä¸‰äººç§°è§£è¯´)ã€‚
* **æ–°æ–¹æ¡ˆ (v2.0):** **ç¬¬ä¸€äººç§°ç›´æ¥é™ˆè¿°**ã€‚
* **System Prompt æ ¸å¿ƒæŒ‡ä»¤:**
> "ä½ å°±æ˜¯åº·å¾·ã€‚ä½ æ‰¾åˆ°äº†ä½ ä»¥å‰å†™è¿‡çš„è¿™æ®µå¾·è¯­åŸæ–‡ä½œä¸ºä¾æ®ã€‚
> ç°åœ¨ï¼Œè¯·ä½ **ç”¨ç”¨æˆ·ä½¿ç”¨çš„è¯­è¨€**ï¼ˆä¾‹å¦‚ç°ä»£ä¸­æ–‡ï¼‰ï¼Œ**é‡æ–°è¡¨è¿°**è¿™æ®µæ€æƒ³ã€‚
> **ä¸è¦**è¯´ 'åº·å¾·è®¤ä¸º...' æˆ–è€… 'è¿™æ®µè¯çš„æ„æ€æ˜¯...'ã€‚
> **è¦**ç›´æ¥è¯´ 'æˆ‘åšæŒè®¤ä¸º...' æˆ–è€…ç›´æ¥é™ˆè¿°å“²å­¦è§‚ç‚¹ã€‚
> è¯­è¨€è¦ç¬¦åˆç°ä»£äººçš„é˜…è¯»ä¹ æƒ¯ï¼Œæ¸…æ™°æœ‰åŠ›ï¼Œä½†é€»è¾‘å¿…é¡»ä¸¥æ ¼å¿ å®äºåŸæ–‡ã€‚"


---

### ğŸ”„ æ›´æ–°åçš„å·¥ä½œæµ (The v2.0 Workflow)

```mermaid
graph TD
    User(ç”¨æˆ· User) -->|1. ä»»æ„è¯­è¨€æé—® \n(e.g., 'CausalitÃ©?')| App[Streamlit Interface]
    
    subgraph "Universal HyDE Bridge"
        App -->|2. Prompt: å°†æ„å›¾è½¬åŒ–ä¸º18ä¸–çºªå¾·è¯­| LLM_Trans[LLM (Gemini)]
        LLM_Trans -->|3. ç”Ÿæˆ: ä¼ªåº·å¾·å¾·è¯­ç‰‡æ®µ \n(KausalitÃ¤t... Erfahrung...)| Embed[Embedding Model]
    end
    
    subgraph "Korpora Database"
        Embed -->|4. å‘é‡æ£€ç´¢| DB[(ChromaDB \nçº¯æ­£ Korpora åŸæ–‡)]
        DB -->|5. å‘½ä¸­: çœŸå®çš„å¾·è¯­åŸæ–‡ç‰‡æ®µ| Context[Raw Context]
    end
    
    subgraph "Re-articulation Engine"
        Context -->|6. åŸæ–‡ + ç”¨æˆ·åŸé—®é¢˜| LLM_Final[LLM (Gemini)]
        LLM_Final -->|7. æŒ‡ä»¤: ç”¨ç”¨æˆ·è¯­è¨€é‡è¿°æ€æƒ³ \n(ç¬¬ä¸€äººç§°, æ— è§£è¯´è…”)| Output[æœ€ç»ˆè¾“å‡º]
    end

    Output -->|8. å±•ç¤º: \n[å¾·è¯­åŸæ–‡å¼•ç”¨] \n[ç°ä»£è¯­è¨€é‡è¿°]| User

```

---

### âœ… æœ€ç»ˆæ•ˆæœé¢„è§ˆ (Simulation)

**ç”¨æˆ·é—® (ä¸­æ–‡):** â€œå“ªæ€•æˆ‘çŸ¥é“å‡¶æ‰‹è¦æ€æˆ‘çš„æœ‹å‹ï¼Œæˆ‘ä¹Ÿä¸èƒ½éª—å‡¶æ‰‹è¯´æœ‹å‹ä¸åœ¨å®¶å—ï¼Ÿâ€

**Digital Kant å›ç­”:**

> **ğŸ“œ ä¾æ® (Korpora åŸæ–‡):**
> *"Die Wahrhaftigkeit in Aussagen... ist eine formale Pflicht des Menschen gegen jeden..." (Ãœber ein vermeintes Recht aus Menschenliebe zu lÃ¼gen)*
> **ğŸ§  åº·å¾· (ç°ä»£ä¸­æ–‡é‡è¿°):**
> â€œç»å¯¹ä¸èƒ½ã€‚è¯šå®å¹¶ä¸æ˜¯ä¸€ç§å¯ä»¥æ ¹æ®â€˜åæœâ€™æ¥æƒè¡¡çš„é€‰é¡¹ï¼Œè€Œæ˜¯ä¸€ç§å¯¹ä»–äººçš„å½¢å¼ä¹‰åŠ¡ã€‚
> ä¸€æ—¦ä½ å¼€å§‹ä¸ºäº†â€˜å¥½çš„ç›®çš„â€™è€Œæ’’è°ï¼Œä½ å°±ç ´åäº†â€˜è¯­è¨€â€™å’Œâ€˜å¥‘çº¦â€™å­˜åœ¨çš„æ ¹åŸºã€‚å¦‚æœæ¯ä¸ªäººéƒ½è§‰å¾—è‡ªå·±å¯ä»¥åœ¨ç´§æ€¥æƒ…å†µä¸‹æ’’è°ï¼Œé‚£ä¹ˆâ€˜çœŸè¯â€™è¿™ä¸ªæ¦‚å¿µæœ¬èº«å°±åœ¨ç¤¾ä¼šä¸­ç“¦è§£äº†ã€‚æ‰€ä»¥æˆ‘åšæŒè®¤ä¸ºï¼Œå“ªæ€•é¢å¯¹å‡¶æ‰‹ï¼Œä½ ä¹Ÿå¿…é¡»æ‰¿æ‹…è¯šå®çš„ä¹‰åŠ¡ï¼Œè‡³äºåæœå¦‚ä½•ï¼Œé‚£ä¸æ˜¯ä½ å¯ä»¥æŒæ§æˆ–è´Ÿè´£çš„é¢†åŸŸã€‚â€


---

### ğŸš€ éƒ¨ç½²æŒ‡å— (Deployment)

#### 1. ç¯å¢ƒå‡†å¤‡
- ç¡®ä¿å·²å®‰è£… Python 3.11+
- è·å– Google Gemini API Key

#### 2. æœ¬åœ°è¿è¡Œ
```bash
# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# è®¾ç½®ç¯å¢ƒå˜é‡ (æˆ–åˆ›å»º .env æ–‡ä»¶)
export GOOGLE_API_KEY="your_api_key_here"

# å¯åŠ¨åº”ç”¨
streamlit run app/main.py
```

#### 3. Docker éƒ¨ç½²
æœ¬é¡¹ç›®æ”¯æŒ Docker å®¹å™¨åŒ–éƒ¨ç½²ã€‚

```bash
# æ„å»ºé•œåƒ
docker build -t digital-kant .

# è¿è¡Œå®¹å™¨
docker run -p 8501:8501 -e GOOGLE_API_KEY="your_api_key_here" digital-kant
```

#### 4. Cloudflare Tunnel éƒ¨ç½² (æ¨è)
æœ€å®‰å…¨çš„ä¸Šçº¿æ–¹å¼æ˜¯ä½¿ç”¨ Cloudflare Tunnelï¼Œæ— éœ€æš´éœ²æœåŠ¡å™¨ IPã€‚

1. **è·å– Token**:
   - ç™»å½• [Cloudflare Zero Trust Dashboard](https://one.dash.cloudflare.com/)
   - è¿›å…¥ **Access** -> **Tunnels** -> **Create a Tunnel**
   - é€‰æ‹© **Cloudflared** éƒ¨ç½²æ–¹å¼
   - å¤åˆ¶ç”Ÿæˆçš„ Token

2. **é…ç½®ç¯å¢ƒ**:
   - åˆ›å»º `.env` æ–‡ä»¶ (å‚è€ƒ `.env.example`)
   - å¡«å…¥ `GOOGLE_API_KEY` å’Œ `TUNNEL_TOKEN`

3. **ä¸€é”®ä¸Šçº¿**:
   ```bash
   docker-compose up -d
   ```
   åº”ç”¨å°†è‡ªåŠ¨é€šè¿‡ Cloudflare Tunnel ä¸Šçº¿ï¼Œæ‚¨å¯ä»¥åœ¨ Cloudflare åå°é…ç½®åŸŸåè®¿é—® (Public Hostname)ã€‚
